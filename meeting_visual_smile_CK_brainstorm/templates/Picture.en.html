{{ block title }}
Settings and Selfie
{{ endblock }}

{{ block global_styles }}
<link rel="stylesheet" href="{{ static 'global/styles/picture.css' }}" type="text/css">
{{ endblock }}

{% block global_scripts %}
<script src="{{ static 'global/scripts/picture-NW76BAAA.js' }}"></script>
{% endblock %}

{{ block content }}
<div class="row">
  <div class="col-5">
    <div class="mb-3">
      <label for="video-source" class="form-label">Choice of webcam</label>
      <select id="video-source" class="form-select form-select-sm"></select>
    </div>
    <div class="mb-3">
      <label for="audio-source" class="form-label">
        Choice of audio input
        <div class="progress">
          <div id="meter" class="progress-bar bg-info" role="progressbar" style="width: 0%"></div>
        </div>
      </label>
      <select id="audio-source" class="form-select form-select-sm"></select>
    </div>
  </div>
  <div class="col-7">
    <p>Before talking with you, other participants will see the selfie taken below.</p>
    <p>Keep your position <strong>centered in front of the camera</strong> and find a suitable brightness setting.</p>
    <p>Also make sure the audio input is properly configured, i.e. that you see the blue light (on the left) move when you speak.</p>
    <div id="selfie-to-take">
      <video playsinline autoplay id="stream"></video>
      <button class="btn btn-warning" id="take-snapshot">Take a picture</button>
    </div>
    <div id="selfie-taken" class="d-none">
      <canvas id="selfie"></canvas>
      <button class="btn btn-light" id="cancel">Take another picture</button>
      <button class="btn btn-primary float-end d-none" id="ok">Start with this picture</button>
    </div>
    <p class="mt-5">In case of problems during the experiment:</p>
    <ul>
      <li>Make sure you are using the latest version of the Chrome browser and that you are connected to the internet</li>
      <li>Wait a few seconds and reload the page</li>
      <li>If the problem persists, send a text to 0684921627</li>
    </ul>
  </div>
</div>

<div class="d-none">
  <form>
    <input type="hidden" id="audio_source_id" name="audio_source_id" />
    <input type="hidden" id="video_source_id" name="video_source_id" />
    <input type="hidden" id="image_data" name="image_data" />
  </form>
</div>
{{ endblock }}
